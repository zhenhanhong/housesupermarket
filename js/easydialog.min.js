/* 
 * easyDialog v1.5
 * Url : http://stylechen.com/easydialog.html
 * Author : chenmnkken@gmail.com
 * Date : 2011-04-15
 */
(function(){var d=window.document,b=d.documentElement;var e=function(){var l=d.body,h=!-[1,],j=navigator.userAgent.toLowerCase().indexOf("msie 6.0")!==-1,n={},i,g;var m=function(){this.defaults={container:null,isOverlay:true,fixed:true,follow:null,followX:0,followY:0,autoClose:0,callback:null}};m.prototype={getOptions:function(o){var p={},q;for(q in this.defaults){p[q]=o[q]!==undefined?o[q]:this.defaults[q]}return p},setBodyBg:function(){if(l.currentStyle.backgroundAttachment!=="fixed"){l.style.backgroundImage="url(about:blank)";l.style.backgroundAttachment="fixed"}},appendIframe:function(o){o.innerHTML='<iframe style="position:absolute;left:0;top:0;width:100%;height:100%;z-index:-1;border:0 none;filter:alpha(opacity=0)"></iframe>'},removeNode:h?(function(){var o;return function(p){o=o||d.createElement("div");o.appendChild(p);o.innerHTML=""}})():function(o){o.parentNode.removeChild(o)},getOffset:function(o){var q=h?o.getBoundingClientRect().top+b.scrollTop:o.offsetTop,p=h?o.getBoundingClientRect().left+b.scrollLeft:o.offsetLeft;return{top:q,left:p}},overlay:function(){var o;return(function(){o=o||d.createElement("div");o.style.cssText="margin:0;padding:0;border:none;width:100%;height:100%;background:#333;opacity:0.6;filter:alpha(opacity=60);z-index:1000;position:fixed;top:0;left:0;";if(j){l.style.height="100%";o.style.position="absolute";o.style.setExpression("top",'fuckIE6=document.documentElement.scrollTop+"px"')}o.id="overlay";return o})()},dialogBox:function(){var o,p=this;return(function(){o=o||d.createElement("div");o.style.cssText="margin:0;padding:0;border:none;z-index:1001;";var q=function(r){o.style.top=(p.getOffset(r).top+n.followY)+"px";o.style.left=(p.getOffset(r).left+n.followX)+"px";n.fixed=false;n.isOverlay=false};if(typeof n.follow==="string"){q(d.getElementById(n.follow))}else{if(n.follow&&typeof n.follow==="object"){q(n.follow)}else{o.style.top=o.style.left="50%"}}if(n.fixed){if(j){o.style.position="absolute";o.style.setExpression("top",'fuckIE6=document.documentElement.scrollTop+document.documentElement.clientHeight/2+"px"')}else{o.style.position="fixed"}}else{o.style.position="absolute";if(n.follow===null){o.style.top=(b.clientHeight/2+Math.max(b.scrollTop,l.scrollTop))+"px";o.style.left=(b.clientWidth/2+Math.max(b.scrollLeft,l.scrollLeft))+"px";window.onresize=function(){o.style.top=(b.clientHeight/2+Math.max(b.scrollTop,l.scrollTop))+"px";o.style.left=(b.clientWidth/2+Math.max(b.scrollLeft,l.scrollLeft))+"px"}}}o.id="dialog_box";return o})()}};var k=new m();var f={open:function(){var p=this;if(d.getElementById("dialog_box")){p.close()}if(g){clearTimeout(g)}n=k.getOptions(arguments[0]);var r=k.dialogBox();if(n.isOverlay){var q=k.overlay();l.appendChild(q);if(j){k.appendIframe(q)}}if(j){k.setBodyBg()}l.appendChild(r);if(typeof n.container==="string"){i=d.getElementById(n.container);if(j&&!n.isOverlay){k.appendIframe(r)}r.appendChild(i);i.style.display="block";var o=i.offsetWidth,s=i.offsetHeight;i.style.marginTop=i.style.marginRight=i.style.marginBottom=i.style.marginLeft="0px";if(!n.follow){r.style.marginLeft="-"+o/2+"px";r.style.marginTop="-"+s/2+"px"}if(j&&!n.isOverlay){r.style.width=o+"px";r.style.height=s+"px"}}if(n.autoClose&&typeof n.autoClose==="number"){g=setTimeout(function(){p.close()},n.autoClose)}d.onkeyup=function(t){t=t||window.event;if(t.keyCode===27){p.close()}}},close:function(){if(g){clearTimeout(g)}d.onkeyup=null;if(document.getElementById("overlay")){k.removeNode(d.getElementById("overlay"))}i.style.display="none";l.appendChild(i);k.removeNode(d.getElementById("dialog_box"));if(typeof n.callback==="function"){n.callback()}}};return f};var c=function(){window.easyDialog=e()},a=function(){if(d.body){return}try{b.doScroll("left")}catch(f){setTimeout(a,1);return}c()};(function(){if(d.body){c()}else{if(d.addEventListener){d.addEventListener("DOMContentLoaded",function(){d.removeEventListener("DOMContentLoaded",arguments.callee,false);c()},false);window.addEventListener("load",c,false)}else{if(d.attachEvent){d.attachEvent("onreadystatechange",function(){if(d.readyState==="complete"){d.detachEvent("onreadystatechange",arguments.callee);c()}});window.attachEvent("onload",c);var f=false;try{f=window.frameElement==null}catch(g){}if(b.doScroll&&f){a()}}}}})()})();
